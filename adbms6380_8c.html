<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PER Firmware: source/a_box/adbms/adbms6380.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PER Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('adbms6380_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">adbms6380.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Low level BMS driver specific to ADBMS6380 chip.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="adbms6380_8h_source.html">adbms6380.h</a>&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="commands_8h_source.html">commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="freertos_8h_source.html">common/freertos/freertos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="phal_2gpio_8h_source.html">common/phal/gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="phal_2spi_8h_source.html">common/phal/spi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pec_8h_source.html">pec.h</a>&quot;</code><br />
</div>
<p><a href="adbms6380_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a12a7403f2f6b47af40cc7d278909ebe7" id="r_a12a7403f2f6b47af40cc7d278909ebe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12a7403f2f6b47af40cc7d278909ebe7">adbms6380_set_cs_low</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi)</td></tr>
<tr class="memdesc:a12a7403f2f6b47af40cc7d278909ebe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drive the ADBMS CS line low.  <br /></td></tr>
<tr class="separator:a12a7403f2f6b47af40cc7d278909ebe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50a5200f4ab61124ab070e8898f0cc9" id="r_ae50a5200f4ab61124ab070e8898f0cc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae50a5200f4ab61124ab070e8898f0cc9">adbms6380_set_cs_high</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi)</td></tr>
<tr class="memdesc:ae50a5200f4ab61124ab070e8898f0cc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drive the ADBMS CS line to high.  <br /></td></tr>
<tr class="separator:ae50a5200f4ab61124ab070e8898f0cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d7e305df1794e6146e9aa0e885bf65" id="r_a98d7e305df1794e6146e9aa0e885bf65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98d7e305df1794e6146e9aa0e885bf65">adbms6380_wake</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, size_t module_count)</td></tr>
<tr class="memdesc:a98d7e305df1794e6146e9aa0e885bf65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wake a daisy-chained set of ADBMS devices.  <br /></td></tr>
<tr class="separator:a98d7e305df1794e6146e9aa0e885bf65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dba9c62715355f360c6e4f1b150d334" id="r_a7dba9c62715355f360c6e4f1b150d334"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7dba9c62715355f360c6e4f1b150d334">adbms6380_get_threshold_voltage_cfg</a> (float threshold_voltage)</td></tr>
<tr class="memdesc:a7dba9c62715355f360c6e4f1b150d334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a voltage threshold (V) into 12-bit REG_B threshold encoding.  <br /></td></tr>
<tr class="separator:a7dba9c62715355f360c6e4f1b150d334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5015be743738347dcf5a108a0fd276d6" id="r_a5015be743738347dcf5a108a0fd276d6"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5015be743738347dcf5a108a0fd276d6">adbms6380_extract_i16</a> (uint8_t *data, int idx)</td></tr>
<tr class="memdesc:a5015be743738347dcf5a108a0fd276d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract a little-endian 16-bit signed value from a byte buffer.  <br /></td></tr>
<tr class="separator:a5015be743738347dcf5a108a0fd276d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9f567aae9798e09e92280c8919a184" id="r_a2e9f567aae9798e09e92280c8919a184"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e9f567aae9798e09e92280c8919a184">adbms6380_raw_to_v</a> (int16_t raw)</td></tr>
<tr class="memdesc:a2e9f567aae9798e09e92280c8919a184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert raw voltage measurement from the ADBMS6380 to volts.  <br /></td></tr>
<tr class="separator:a2e9f567aae9798e09e92280c8919a184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82dae6e61b86fae558baf2f24f1bc9c" id="r_ad82dae6e61b86fae558baf2f24f1bc9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad82dae6e61b86fae558baf2f24f1bc9c">adbms6380_adcv</a> (uint8_t output_cmd[(2)], bool rd, bool cont, bool dcp, bool rstf, uint8_t ow)</td></tr>
<tr class="memdesc:ad82dae6e61b86fae558baf2f24f1bc9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build ADCV command bytes.  <br /></td></tr>
<tr class="separator:ad82dae6e61b86fae558baf2f24f1bc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c8652f788fcc6fdafe167ea84ddfa0" id="r_ab4c8652f788fcc6fdafe167ea84ddfa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4c8652f788fcc6fdafe167ea84ddfa0">adbms6380_adsv</a> (uint8_t output_cmd[(2)], bool cont, bool dcp, uint8_t ow)</td></tr>
<tr class="memdesc:ab4c8652f788fcc6fdafe167ea84ddfa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build ADSV command bytes.  <br /></td></tr>
<tr class="separator:ab4c8652f788fcc6fdafe167ea84ddfa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69d8d846f45a7f90c5514b12ce8cfe5" id="r_ac69d8d846f45a7f90c5514b12ce8cfe5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac69d8d846f45a7f90c5514b12ce8cfe5">adbms6380_adax</a> (uint8_t output_cmd[(2)], bool ow, bool pup, uint8_t ch)</td></tr>
<tr class="memdesc:ac69d8d846f45a7f90c5514b12ce8cfe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build ADAX (aux) command bytes.  <br /></td></tr>
<tr class="separator:ac69d8d846f45a7f90c5514b12ce8cfe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c312ba06fc054f6f27818fa9b7d895" id="r_a18c312ba06fc054f6f27818fa9b7d895"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18c312ba06fc054f6f27818fa9b7d895">adbms6380_prepare_command</a> (<a class="el" href="structstrbuf__t.html">strbuf_t</a> *output_buffer, const uint8_t command[(2)])</td></tr>
<tr class="memdesc:a18c312ba06fc054f6f27818fa9b7d895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a command and its PEC to an output buffer.  <br /></td></tr>
<tr class="separator:a18c312ba06fc054f6f27818fa9b7d895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fefb6f2303fb85b44efd3c6f61493fa" id="r_a3fefb6f2303fb85b44efd3c6f61493fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fefb6f2303fb85b44efd3c6f61493fa">adbms6380_prepare_data_packet</a> (<a class="el" href="structstrbuf__t.html">strbuf_t</a> *output_buffer, const uint8_t data[(6)])</td></tr>
<tr class="memdesc:a3fefb6f2303fb85b44efd3c6f61493fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a data payload and its PEC to an output buffer.  <br /></td></tr>
<tr class="separator:a3fefb6f2303fb85b44efd3c6f61493fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aac24bf20dd17b4e395c21915b58f4e" id="r_a2aac24bf20dd17b4e395c21915b58f4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2aac24bf20dd17b4e395c21915b58f4e">adbms6380_calculate_cfg_rega</a> (uint8_t output_cfg_rega[(6)], bool refon, uint8_t cth)</td></tr>
<tr class="memdesc:a2aac24bf20dd17b4e395c21915b58f4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the REG_A configuration register value.  <br /></td></tr>
<tr class="separator:a2aac24bf20dd17b4e395c21915b58f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a2416ebc169fa056e052866634a496" id="r_a84a2416ebc169fa056e052866634a496"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84a2416ebc169fa056e052866634a496">adbms6380_calculate_cfg_regb</a> (uint8_t output_cfg_regb[(6)], float overvoltage_threshold, float undervoltage_threshold, const bool is_discharging[(16)])</td></tr>
<tr class="memdesc:a84a2416ebc169fa056e052866634a496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the REG_B configuration register value.  <br /></td></tr>
<tr class="separator:a84a2416ebc169fa056e052866634a496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad065e19e0b9ff761f14abe8bf654750d" id="r_ad065e19e0b9ff761f14abe8bf654750d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad065e19e0b9ff761f14abe8bf654750d">adbms6380_check_data_pec</a> (const uint8_t *rx_bytes, size_t rx_len)</td></tr>
<tr class="memdesc:ad065e19e0b9ff761f14abe8bf654750d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify the PEC of received data.  <br /></td></tr>
<tr class="separator:ad065e19e0b9ff761f14abe8bf654750d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8378330b0bf96313b0cb4146e1769b" id="r_aae8378330b0bf96313b0cb4146e1769b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae8378330b0bf96313b0cb4146e1769b">adbms6380_read</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, size_t module_count, const uint8_t cmd_buffer[((2)+(2))], uint8_t *rx_buffer, size_t rx_length_per_module)</td></tr>
<tr class="memdesc:aae8378330b0bf96313b0cb4146e1769b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a fixed-length response from all modules after a command.  <br /></td></tr>
<tr class="separator:aae8378330b0bf96313b0cb4146e1769b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d495b43263815f92d003c9abcee35a" id="r_a92d495b43263815f92d003c9abcee35a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92d495b43263815f92d003c9abcee35a">adbms6380_read_data_with_retries</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, size_t max_retries, size_t module_count, const uint8_t cmd_buffer[((2)+(2))], uint8_t *rx_buffer)</td></tr>
<tr class="memdesc:a92d495b43263815f92d003c9abcee35a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single-data-packet response per module and retries on PEC failure.  <br /></td></tr>
<tr class="separator:a92d495b43263815f92d003c9abcee35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e1b6c401afb6ec8cde0c2d220702797" id="r_a8e1b6c401afb6ec8cde0c2d220702797"><td class="memItemLeft" align="right" valign="top"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8e1b6c401afb6ec8cde0c2d220702797">adbms6380_read_data</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, size_t module_count, const uint8_t cmd_buffer[((2)+(2))], uint8_t *rx_buffer)</td></tr>
<tr class="memdesc:a8e1b6c401afb6ec8cde0c2d220702797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single-data-packet response per module.  <br /></td></tr>
<tr class="separator:a8e1b6c401afb6ec8cde0c2d220702797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfa5323aa8bc66c06491ae2c14514bf" id="r_a7cfa5323aa8bc66c06491ae2c14514bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cfa5323aa8bc66c06491ae2c14514bf">adbms6380_read_cell_voltages</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, <a class="el" href="structstrbuf__t.html">strbuf_t</a> *cmd_buffer, uint8_t *rx_buffer, float **cell_voltages, int16_t **cell_voltages_raw, bool pec_error_flags[(6)], size_t module_count, size_t max_retries_on_pec_failure)</td></tr>
<tr class="memdesc:a7cfa5323aa8bc66c06491ae2c14514bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read all cell voltages from each module.  <br /></td></tr>
<tr class="separator:a7cfa5323aa8bc66c06491ae2c14514bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb9da8511cda94681011d0d51a2da9a5" id="r_acb9da8511cda94681011d0d51a2da9a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb9da8511cda94681011d0d51a2da9a5">adbms6380_read_gpio_voltages</a> (<a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *spi, <a class="el" href="structstrbuf__t.html">strbuf_t</a> *cmd_buffer, uint8_t *rx_buffer, float **gpio_voltages, bool pec_error_flags[(4)], size_t module_count, size_t max_retries_on_pec_failure)</td></tr>
<tr class="memdesc:acb9da8511cda94681011d0d51a2da9a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read all GPIO/aux voltages from each module.  <br /></td></tr>
<tr class="separator:acb9da8511cda94681011d0d51a2da9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Low level BMS driver specific to ADBMS6380 chip. </p>
<dl class="section author"><dt>Author</dt><dd>Millan Kumar (<a href="#" onclick="location.href='mai'+'lto:'+'kum'+'ar'+'798'+'@p'+'urd'+'ue'+'.ed'+'u'; return false;">kumar<span class="obfuscator">.nosp@m.</span>798@<span class="obfuscator">.nosp@m.</span>purdu<span class="obfuscator">.nosp@m.</span>e.ed<span class="obfuscator">.nosp@m.</span>u</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac69d8d846f45a7f90c5514b12ce8cfe5" name="ac69d8d846f45a7f90c5514b12ce8cfe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac69d8d846f45a7f90c5514b12ce8cfe5">&#9670;&#160;</a></span>adbms6380_adax()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_adax </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>output_cmd</em></span>[(2)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>ow</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>pup</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ch</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build ADAX (aux) command bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cmd</td><td>Output buffer for 2-byte command. </td></tr>
    <tr><td class="paramname">ow</td><td>Open-wire detection enable. </td></tr>
    <tr><td class="paramname">pup</td><td>Pull-up enable for open-wire detection. </td></tr>
    <tr><td class="paramname">ch</td><td>Channel selection (5-bit). 0 for all. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00076">76</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00309">adbms_read_therms()</a>.</p>

</div>
</div>
<a id="ad82dae6e61b86fae558baf2f24f1bc9c" name="ad82dae6e61b86fae558baf2f24f1bc9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82dae6e61b86fae558baf2f24f1bc9c">&#9670;&#160;</a></span>adbms6380_adcv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_adcv </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>output_cmd</em></span>[(2)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>rd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>cont</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dcp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>rstf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ow</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build ADCV command bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cmd</td><td>Output buffer for 2-byte command. </td></tr>
    <tr><td class="paramname">rd</td><td>Redundant mode. </td></tr>
    <tr><td class="paramname">cont</td><td>Continuous conversion enable. </td></tr>
    <tr><td class="paramname">dcp</td><td>Discharge permitted during conversion (only affects PWM balancing, not DCC). </td></tr>
    <tr><td class="paramname">rstf</td><td>Reset filter. </td></tr>
    <tr><td class="paramname">ow</td><td>Open-wire setting (2-bit). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00055">55</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00165">adbms_connect()</a>.</p>

</div>
</div>
<a id="ab4c8652f788fcc6fdafe167ea84ddfa0" name="ab4c8652f788fcc6fdafe167ea84ddfa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c8652f788fcc6fdafe167ea84ddfa0">&#9670;&#160;</a></span>adbms6380_adsv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_adsv </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>output_cmd</em></span>[(2)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>cont</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>dcp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>ow</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build ADSV command bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cmd</td><td>Output buffer for 2-byte command. </td></tr>
    <tr><td class="paramname">cont</td><td>Continuous conversion enable. </td></tr>
    <tr><td class="paramname">dcp</td><td>Discharge permitted during conversion (only affects PWM balancing, not DCC). </td></tr>
    <tr><td class="paramname">ow</td><td>Open-wire setting (2-bit). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00067">67</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

</div>
</div>
<a id="a2aac24bf20dd17b4e395c21915b58f4e" name="a2aac24bf20dd17b4e395c21915b58f4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aac24bf20dd17b4e395c21915b58f4e">&#9670;&#160;</a></span>adbms6380_calculate_cfg_rega()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_calculate_cfg_rega </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>output_cfg_rega</em></span>[(6)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>refon</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>cth</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the REG_A configuration register value. </p>
<p>Populates GPIO pull-downs, reference behavior, and comparator threshold.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cfg_rega</td><td>Output buffer for REG_A configuration (6 bytes). </td></tr>
    <tr><td class="paramname">refon</td><td>1 = reference remains powered up until watchdog timeout. </td></tr>
    <tr><td class="paramname">cth</td><td>C-ADC vs. S-ADC comparison voltage threshold. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00098">98</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00030">ADBMS6380_SINGLE_DATA_RAW_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00055">adbms_write_rega()</a>.</p>

</div>
</div>
<a id="a84a2416ebc169fa056e052866634a496" name="a84a2416ebc169fa056e052866634a496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a2416ebc169fa056e052866634a496">&#9670;&#160;</a></span>adbms6380_calculate_cfg_regb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_calculate_cfg_regb </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>output_cfg_regb</em></span>[(6)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>overvoltage_threshold</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>undervoltage_threshold</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool</td>          <td class="paramname"><span class="paramname"><em>is_discharging</em></span>[(16)]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the REG_B configuration register value. </p>
<p>Encodes VOV/VUV thresholds and discharge control bits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cfg_regb</td><td>Output buffer for REG_B configuration (6 bytes). </td></tr>
    <tr><td class="paramname">overvoltage_threshold</td><td>Overvoltage threshold in volts. </td></tr>
    <tr><td class="paramname">undervoltage_threshold</td><td>Undervoltage threshold in volts. </td></tr>
    <tr><td class="paramname">is_discharging</td><td>Per-cell discharge enable flags. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00117">117</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00019">ADBMS6380_CELL_COUNT</a>, <a class="el" href="adbms6380_8c_source.html#l00038">adbms6380_get_threshold_voltage_cfg()</a>, and <a class="el" href="adbms6380_8h_source.html#l00030">ADBMS6380_SINGLE_DATA_RAW_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00075">adbms_write_regb()</a>.</p>

</div>
</div>
<a id="ad065e19e0b9ff761f14abe8bf654750d" name="ad065e19e0b9ff761f14abe8bf654750d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad065e19e0b9ff761f14abe8bf654750d">&#9670;&#160;</a></span>adbms6380_check_data_pec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool adbms6380_check_data_pec </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>rx_len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify the PEC of received data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rx_bytes</td><td>Pointer to received bytes from a module. PEC10 must follow the raw data bytes. </td></tr>
    <tr><td class="paramname">rx_len</td><td>Length of the recieved data from a module in bytes (including PEC, so the raw data is actually rx_len - ADBMS6380_PEC_SIZE). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the received PEC matches calculated value, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00146">146</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00024">ADBMS6380_PEC_SIZE</a>, and <a class="el" href="pec_8c_source.html#l00086">adbms_pec_get_pec10()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00157">adbms6380_read()</a>.</p>

</div>
</div>
<a id="a5015be743738347dcf5a108a0fd276d6" name="a5015be743738347dcf5a108a0fd276d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5015be743738347dcf5a108a0fd276d6">&#9670;&#160;</a></span>adbms6380_extract_i16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t adbms6380_extract_i16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>idx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract a little-endian 16-bit signed value from a byte buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to byte buffer containing 16-bit words. </td></tr>
    <tr><td class="paramname">idx</td><td>Index of the 16-bit word to extract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Signed 16-bit value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00047">47</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00223">adbms6380_read_cell_voltages()</a>, and <a class="el" href="adbms6380_8c_source.html#l00281">adbms6380_read_gpio_voltages()</a>.</p>

</div>
</div>
<a id="a7dba9c62715355f360c6e4f1b150d334" name="a7dba9c62715355f360c6e4f1b150d334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dba9c62715355f360c6e4f1b150d334">&#9670;&#160;</a></span>adbms6380_get_threshold_voltage_cfg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adbms6380_get_threshold_voltage_cfg </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>threshold_voltage</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a voltage threshold (V) into 12-bit REG_B threshold encoding. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threshold_voltage</td><td>Threshold voltage in volts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>12-bit configuration value suitable for VOV/VUV fields. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00038">38</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00117">adbms6380_calculate_cfg_regb()</a>.</p>

</div>
</div>
<a id="a18c312ba06fc054f6f27818fa9b7d895" name="a18c312ba06fc054f6f27818fa9b7d895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c312ba06fc054f6f27818fa9b7d895">&#9670;&#160;</a></span>adbms6380_prepare_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_prepare_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstrbuf__t.html">strbuf_t</a> *</td>          <td class="paramname"><span class="paramname"><em>output_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>command</em></span>[(2)]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append a command and its PEC to an output buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_buffer</td><td>Buffer to append into. </td></tr>
    <tr><td class="paramname">command</td><td>2-byte command payload. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00082">82</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00026">ADBMS6380_COMMAND_RAW_SIZE</a>, <a class="el" href="adbms6380_8h_source.html#l00024">ADBMS6380_PEC_SIZE</a>, <a class="el" href="pec_8c_source.html#l00075">adbms_pec_get_pec15()</a>, and <a class="el" href="strbuf_8c_source.html#l00025">strbuf_append()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00223">adbms6380_read_cell_voltages()</a>, <a class="el" href="adbms6380_8c_source.html#l00281">adbms6380_read_gpio_voltages()</a>, <a class="el" href="adbms_8c_source.html#l00165">adbms_connect()</a>, <a class="el" href="adbms_8c_source.html#l00097">adbms_read_and_check_rega()</a>, <a class="el" href="adbms_8c_source.html#l00131">adbms_read_and_check_regb()</a>, <a class="el" href="adbms_8c_source.html#l00309">adbms_read_therms()</a>, <a class="el" href="adbms_8c_source.html#l00055">adbms_write_rega()</a>, and <a class="el" href="adbms_8c_source.html#l00075">adbms_write_regb()</a>.</p>

</div>
</div>
<a id="a3fefb6f2303fb85b44efd3c6f61493fa" name="a3fefb6f2303fb85b44efd3c6f61493fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fefb6f2303fb85b44efd3c6f61493fa">&#9670;&#160;</a></span>adbms6380_prepare_data_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_prepare_data_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstrbuf__t.html">strbuf_t</a> *</td>          <td class="paramname"><span class="paramname"><em>output_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>data</em></span>[(6)]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append a data payload and its PEC to an output buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_buffer</td><td>Buffer to append into. </td></tr>
    <tr><td class="paramname">data</td><td>6-byte data payload. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00090">90</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00024">ADBMS6380_PEC_SIZE</a>, <a class="el" href="adbms6380_8h_source.html#l00030">ADBMS6380_SINGLE_DATA_RAW_SIZE</a>, <a class="el" href="pec_8c_source.html#l00086">adbms_pec_get_pec10()</a>, and <a class="el" href="strbuf_8c_source.html#l00025">strbuf_append()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00055">adbms_write_rega()</a>, and <a class="el" href="adbms_8c_source.html#l00075">adbms_write_regb()</a>.</p>

</div>
</div>
<a id="a2e9f567aae9798e09e92280c8919a184" name="a2e9f567aae9798e09e92280c8919a184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9f567aae9798e09e92280c8919a184">&#9670;&#160;</a></span>adbms6380_raw_to_v()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float adbms6380_raw_to_v </td>
          <td>(</td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>raw</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert raw voltage measurement from the ADBMS6380 to volts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw</td><td>Raw code from ADBMS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Corresponding voltage in volts. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00051">51</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00223">adbms6380_read_cell_voltages()</a>, and <a class="el" href="adbms6380_8c_source.html#l00281">adbms6380_read_gpio_voltages()</a>.</p>

</div>
</div>
<a id="aae8378330b0bf96313b0cb4146e1769b" name="aae8378330b0bf96313b0cb4146e1769b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8378330b0bf96313b0cb4146e1769b">&#9670;&#160;</a></span>adbms6380_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a> adbms6380_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>cmd_buffer</em></span>[((2)+(2))], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>rx_length_per_module</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a fixed-length response from all modules after a command. </p>
<p>Sends the command to the daisy chain, then reads <code>rx_length</code> bytes into <code>rx_buffer</code>. Data is returned in module order (0..N-1).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration used for the transfer. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
    <tr><td class="paramname">cmd_buffer</td><td>Command buffer including PEC. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>Output buffer for received bytes. </td></tr>
    <tr><td class="paramname">rx_length_per_module</td><td>Number of bytes expected from each module (including PEC). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A result code indicating success, PEC failure, or SPI failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00157">157</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8c_source.html#l00146">adbms6380_check_data_pec()</a>, <a class="el" href="adbms6380_8h_source.html#l00028">ADBMS6380_COMMAND_PKT_SIZE</a>, <a class="el" href="adbms6380_8h_source.html#l00057">ADBMS6380_READ_PEC_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00058">ADBMS6380_READ_SPI_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00056">ADBMS6380_READ_SUCCESS</a>, <a class="el" href="adbms6380_8c_source.html#l00025">adbms6380_set_cs_high()</a>, <a class="el" href="adbms6380_8c_source.html#l00021">adbms6380_set_cs_low()</a>, and <a class="el" href="common_2phal__F4__F7_2spi_2spi_8c_source.html#l00087">PHAL_SPI_transfer_noDMA()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00215">adbms6380_read_data()</a>, and <a class="el" href="adbms6380_8c_source.html#l00189">adbms6380_read_data_with_retries()</a>.</p>

</div>
</div>
<a id="a7cfa5323aa8bc66c06491ae2c14514bf" name="a7cfa5323aa8bc66c06491ae2c14514bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfa5323aa8bc66c06491ae2c14514bf">&#9670;&#160;</a></span>adbms6380_read_cell_voltages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool adbms6380_read_cell_voltages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstrbuf__t.html">strbuf_t</a> *</td>          <td class="paramname"><span class="paramname"><em>cmd_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float **</td>          <td class="paramname"><span class="paramname"><em>cell_voltages</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t **</td>          <td class="paramname"><span class="paramname"><em>cell_voltages_raw</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>pec_error_flags</em></span>[(6)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_retries_on_pec_failure</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read all cell voltages from each module. </p>
<p>Issues the RDCVALL command, converts raw values to volts, and fills the provided per-module cell voltage arrays. If any of the commands fail with a PEC error (even with the retries), the successfully read cell voltages will still be updated but the corresponding PEC error flag will be set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration used for the transfer. </td></tr>
    <tr><td class="paramname">cmd_buffer</td><td>Scratch buffer for command + PEC. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>RX buffer for raw bytes. </td></tr>
    <tr><td class="paramname">cell_voltages</td><td>Per-module arrays of cell voltages to populate. </td></tr>
    <tr><td class="paramname">cell_voltages_raw</td><td>Per-module arrays of raw cell voltage codes to populate. </td></tr>
    <tr><td class="paramname">pec_error_flags</td><td>Output array of flags indicating which command (if any) had PEC failures after retries are exhausted. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
    <tr><td class="paramname">max_retries_on_pec_failure</td><td>Number of attempts to retry a read if a PEC failure is detected before giving up. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on SPI failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00223">223</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8h_source.html#l00019">ADBMS6380_CELL_COUNT</a>, <a class="el" href="adbms6380_8c_source.html#l00047">adbms6380_extract_i16()</a>, <a class="el" href="adbms6380_8c_source.html#l00082">adbms6380_prepare_command()</a>, <a class="el" href="adbms6380_8c_source.html#l00051">adbms6380_raw_to_v()</a>, <a class="el" href="adbms6380_8h_source.html#l00036">ADBMS6380_RDCV_CMD_COUNT</a>, <a class="el" href="adbms6380_8c_source.html#l00189">adbms6380_read_data_with_retries()</a>, <a class="el" href="adbms6380_8h_source.html#l00057">ADBMS6380_READ_PEC_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00058">ADBMS6380_READ_SPI_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00056">ADBMS6380_READ_SUCCESS</a>, <a class="el" href="adbms6380_8h_source.html#l00032">ADBMS6380_SINGLE_DATA_PKT_SIZE</a>, <a class="el" href="strbuf_8h_source.html#l00016">strbuf_t::data</a>, <a class="el" href="commands_8c_source.html#l00019">RDCVA</a>, <a class="el" href="commands_8c_source.html#l00020">RDCVB</a>, <a class="el" href="commands_8c_source.html#l00021">RDCVC</a>, <a class="el" href="commands_8c_source.html#l00022">RDCVD</a>, <a class="el" href="commands_8c_source.html#l00023">RDCVE</a>, <a class="el" href="commands_8c_source.html#l00024">RDCVF</a>, and <a class="el" href="strbuf_8c_source.html#l00017">strbuf_clear()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00257">adbms_read_cells()</a>.</p>

</div>
</div>
<a id="a8e1b6c401afb6ec8cde0c2d220702797" name="a8e1b6c401afb6ec8cde0c2d220702797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e1b6c401afb6ec8cde0c2d220702797">&#9670;&#160;</a></span>adbms6380_read_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a> adbms6380_read_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>cmd_buffer</em></span>[((2)+(2))], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single-data-packet response per module. </p>
<p>Convenience wrapper around <a class="el" href="adbms6380_8h.html#aae8378330b0bf96313b0cb4146e1769b" title="Read a fixed-length response from all modules after a command.">adbms6380_read()</a> with ADBMS6380_SINGLE_DATA_PKT_SIZE as the expected response length per module.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration used for the transfer. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
    <tr><td class="paramname">cmd_buffer</td><td>Command buffer including PEC. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>Output buffer for received bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A result code indicating success, PEC failure, or SPI failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00215">215</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8c_source.html#l00157">adbms6380_read()</a>, and <a class="el" href="adbms6380_8h_source.html#l00032">ADBMS6380_SINGLE_DATA_PKT_SIZE</a>.</p>

</div>
</div>
<a id="a92d495b43263815f92d003c9abcee35a" name="a92d495b43263815f92d003c9abcee35a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d495b43263815f92d003c9abcee35a">&#9670;&#160;</a></span>adbms6380_read_data_with_retries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="adbms6380_8h.html#a514ee53f3f0310557805cd8276287976">adbms6380_read_result_t</a> adbms6380_read_data_with_retries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_retries</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>cmd_buffer</em></span>[((2)+(2))], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_buffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single-data-packet response per module and retries on PEC failure. </p>
<p>Convenience wrapper around <a class="el" href="adbms6380_8h.html#a8e1b6c401afb6ec8cde0c2d220702797" title="Read a single-data-packet response per module.">adbms6380_read_data()</a> that retries the read up to a fixed number of attempts if a PEC failure is detected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration used for the transfer. </td></tr>
    <tr><td class="paramname">max_retries</td><td>Maximum number of read attempts if PEC failures occur. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
    <tr><td class="paramname">cmd_buffer</td><td>Command buffer including PEC. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>Output buffer for received bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A result code indicating success, PEC failure, or SPI failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00189">189</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8c_source.html#l00157">adbms6380_read()</a>, <a class="el" href="adbms6380_8h_source.html#l00057">ADBMS6380_READ_PEC_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00058">ADBMS6380_READ_SPI_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00056">ADBMS6380_READ_SUCCESS</a>, and <a class="el" href="adbms6380_8h_source.html#l00032">ADBMS6380_SINGLE_DATA_PKT_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00223">adbms6380_read_cell_voltages()</a>, <a class="el" href="adbms6380_8c_source.html#l00281">adbms6380_read_gpio_voltages()</a>, <a class="el" href="adbms_8c_source.html#l00097">adbms_read_and_check_rega()</a>, and <a class="el" href="adbms_8c_source.html#l00131">adbms_read_and_check_regb()</a>.</p>

</div>
</div>
<a id="acb9da8511cda94681011d0d51a2da9a5" name="acb9da8511cda94681011d0d51a2da9a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb9da8511cda94681011d0d51a2da9a5">&#9670;&#160;</a></span>adbms6380_read_gpio_voltages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool adbms6380_read_gpio_voltages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstrbuf__t.html">strbuf_t</a> *</td>          <td class="paramname"><span class="paramname"><em>cmd_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>rx_buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float **</td>          <td class="paramname"><span class="paramname"><em>gpio_voltages</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>pec_error_flags</em></span>[(4)], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_retries_on_pec_failure</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read all GPIO/aux voltages from each module. </p>
<p>Issues RDAUXA/B/C/D commands, converts raw values to volts, and fills the provided per-module GPIO voltage arrays. If any of the commands fail with a PEC error (even with the retries), the successfully read GPIO voltages will still be updated but the corresponding PEC error flag will be set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration used for the transfer. </td></tr>
    <tr><td class="paramname">cmd_buffer</td><td>Scratch buffer for command + PEC. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>RX buffer for raw bytes. </td></tr>
    <tr><td class="paramname">gpio_voltages</td><td>Per-module arrays of GPIO voltages to populate. </td></tr>
    <tr><td class="paramname">pec_error_flags</td><td>Output array of flags indicating which command (if any) had PEC failures after retries are exhausted. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
    <tr><td class="paramname">max_retries_on_pec_failure</td><td>Number of attempts to retry a read if a PEC failure is detected before giving up. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on SPI failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00281">281</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8c_source.html#l00047">adbms6380_extract_i16()</a>, <a class="el" href="adbms6380_8c_source.html#l00082">adbms6380_prepare_command()</a>, <a class="el" href="adbms6380_8c_source.html#l00051">adbms6380_raw_to_v()</a>, <a class="el" href="adbms6380_8h_source.html#l00040">ADBMS6380_RDAUX_CMD_COUNT</a>, <a class="el" href="adbms6380_8c_source.html#l00189">adbms6380_read_data_with_retries()</a>, <a class="el" href="adbms6380_8h_source.html#l00057">ADBMS6380_READ_PEC_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00058">ADBMS6380_READ_SPI_FAILURE</a>, <a class="el" href="adbms6380_8h_source.html#l00056">ADBMS6380_READ_SUCCESS</a>, <a class="el" href="adbms6380_8h_source.html#l00032">ADBMS6380_SINGLE_DATA_PKT_SIZE</a>, <a class="el" href="strbuf_8h_source.html#l00016">strbuf_t::data</a>, <a class="el" href="commands_8c_source.html#l00062">RDAUXA</a>, <a class="el" href="commands_8c_source.html#l00063">RDAUXB</a>, <a class="el" href="commands_8c_source.html#l00064">RDAUXC</a>, <a class="el" href="commands_8c_source.html#l00065">RDAUXD</a>, and <a class="el" href="strbuf_8c_source.html#l00017">strbuf_clear()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00309">adbms_read_therms()</a>.</p>

</div>
</div>
<a id="ae50a5200f4ab61124ab070e8898f0cc9" name="ae50a5200f4ab61124ab070e8898f0cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50a5200f4ab61124ab070e8898f0cc9">&#9670;&#160;</a></span>adbms6380_set_cs_high()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_set_cs_high </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drive the ADBMS CS line to high. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration containing the CS GPIO. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00025">25</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="phal__F4__F7_2spi_2spi_8h_source.html#l00031">SPI_InitConfig_t::nss_gpio_pin</a>, <a class="el" href="phal__F4__F7_2spi_2spi_8h_source.html#l00030">SPI_InitConfig_t::nss_gpio_port</a>, and <a class="el" href="phal__F4__F7_2gpio_2gpio_8h_source.html#l00282">PHAL_writeGPIO()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00157">adbms6380_read()</a>, <a class="el" href="adbms6380_8c_source.html#l00029">adbms6380_wake()</a>, <a class="el" href="adbms_8c_source.html#l00165">adbms_connect()</a>, <a class="el" href="adbms_8c_source.html#l00309">adbms_read_therms()</a>, <a class="el" href="adbms_8c_source.html#l00055">adbms_write_rega()</a>, <a class="el" href="adbms_8c_source.html#l00075">adbms_write_regb()</a>, and <a class="el" href="a__box_2main_8c_source.html#l00083">main()</a>.</p>

</div>
</div>
<a id="a12a7403f2f6b47af40cc7d278909ebe7" name="a12a7403f2f6b47af40cc7d278909ebe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a7403f2f6b47af40cc7d278909ebe7">&#9670;&#160;</a></span>adbms6380_set_cs_low()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_set_cs_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drive the ADBMS CS line low. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration containing the CS GPIO. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00021">21</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="phal__F4__F7_2spi_2spi_8h_source.html#l00031">SPI_InitConfig_t::nss_gpio_pin</a>, <a class="el" href="phal__F4__F7_2spi_2spi_8h_source.html#l00030">SPI_InitConfig_t::nss_gpio_port</a>, and <a class="el" href="phal__F4__F7_2gpio_2gpio_8h_source.html#l00282">PHAL_writeGPIO()</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms6380_8c_source.html#l00157">adbms6380_read()</a>, <a class="el" href="adbms6380_8c_source.html#l00029">adbms6380_wake()</a>, <a class="el" href="adbms_8c_source.html#l00165">adbms_connect()</a>, <a class="el" href="adbms_8c_source.html#l00309">adbms_read_therms()</a>, <a class="el" href="adbms_8c_source.html#l00055">adbms_write_rega()</a>, and <a class="el" href="adbms_8c_source.html#l00075">adbms_write_regb()</a>.</p>

</div>
</div>
<a id="a98d7e305df1794e6146e9aa0e885bf65" name="a98d7e305df1794e6146e9aa0e885bf65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98d7e305df1794e6146e9aa0e885bf65">&#9670;&#160;</a></span>adbms6380_wake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adbms6380_wake </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSPI__InitConfig__t.html">SPI_InitConfig_t</a> *</td>          <td class="paramname"><span class="paramname"><em>spi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>module_count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wake a daisy-chained set of ADBMS devices. </p>
<p>Toggles CS with blocking delays to bring each module out of sleep.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi</td><td>SPI configuration containing the CS GPIO. </td></tr>
    <tr><td class="paramname">module_count</td><td>Number of modules in the daisy chain. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="adbms6380_8c_source.html#l00029">29</a> of file <a class="el" href="adbms6380_8c_source.html">adbms6380.c</a>.</p>

<p class="reference">References <a class="el" href="adbms6380_8c_source.html#l00025">adbms6380_set_cs_high()</a>, <a class="el" href="adbms6380_8c_source.html#l00021">adbms6380_set_cs_low()</a>, and <a class="el" href="adbms6380_8h_source.html#l00047">ADBMS6380_WAKE_DELAY_MS</a>.</p>

<p class="reference">Referenced by <a class="el" href="adbms_8c_source.html#l00384">adbms_periodic()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_463a06e8c8df3dfb8722b56866f4fb0c.html">a_box</a></li><li class="navelem"><a class="el" href="dir_b9ac109653960c1c094259a09df46e85.html">adbms</a></li><li class="navelem"><a class="el" href="adbms6380_8c.html">adbms6380.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
