// FDCAN filter setup for {{ periph }}
static inline void {{ periph }}_set_filters() {
    {% set fdcan_filt = mapping.fdcan_filters.get(periph) %}
    {% set accept_all = mapping.accept_all.get(periph, False) %}
    {% if accept_all %}
    // Accept all messages - filters configured in PHAL_FDCAN_init() by default
    (void)0;
    {% elif fdcan_filt and (fdcan_filt.std_ids or fdcan_filt.ext_ids) %}
    {% if fdcan_filt.std_ids %}
    static uint32_t sid_list[] = {
        {% for msg in fdcan_filt.std_ids %}
        {{ msg.macro_name }}_MSG_ID{{ "," if not loop.last }}
        {% endfor %}
    };
    {% endif %}

    {% if fdcan_filt.ext_ids %}
    static uint32_t xid_list[] = {
        {% for msg in fdcan_filt.ext_ids %}
        {{ msg.macro_name }}_MSG_ID{{ "," if not loop.last }}
        {% endfor %}
    };
    {% endif %}

    PHAL_FDCAN_setFilters(
        {{ periph }},
        {% if fdcan_filt.std_ids %}
        sid_list, {{ fdcan_filt.std_ids|length }},
        {% else %}
        NULL, 0,
        {% endif %}
        {% if fdcan_filt.ext_ids %}xid_list,
        {{ fdcan_filt.ext_ids|length }}
        {% else %}
        NULL, 0
        {% endif %}
    );
    {% else %}
    // No filters configured
    (void)0;
    {% endif %}
}
