{
    "node_name": "MAIN_MODULE",
    "scheduler": "freertos",
    "busses": {
        "VCAN": {
            "peripheral": "FDCAN2",
            "tx": [
                {
                    "msg_name": "main_hb",
                    "msg_desc": "Heart beat message for main module",
                    "signals": [
                        {
                            "sig_name": "car_state",
                            "sig_desc": "Main car state",
                            "type": "CarState_t"
                        },
                        {
                            "sig_name": "precharge_state",
                            "sig_desc": "Status of Precharge (complete vs not)",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 2
                },
                {
                    "msg_name": "main_module_can_stats",
                    "msg_desc": "CAN diagnostics",
                    "signals": [
                        {
                            "sig_name": "can1_tx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "VCAN Tx queue overflow count"
                        },
                        {
                            "sig_name": "can2_tx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "MCAN Tx queue overflow count"
                        },
                        {
                            "sig_name": "can1_tx_fail",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx fail count for VCAN (due to timeout in mailbox)"
                        },
                        {
                            "sig_name": "can2_tx_fail",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx fail count for MCAN (due to timeout in mailbox)"
                        },
                        {
                            "sig_name": "can_rx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "CAN Rx queue overflow count"
                        },
                        {
                            "sig_name": "can1_rx_overrun",
                            "type": "uint8_t",
                            "sig_desc": "VCAN Rx FIFO overrun count"
                        },
                        {
                            "sig_name": "can2_rx_overrun",
                            "type": "uint8_t",
                            "sig_desc": "MCAN Rx FIFO overrun count"
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 4
                },
                {
                    "msg_name": "rear_motor_currents_volts",
                    "msg_desc": "DC Current and Voltage of the motors",
                    "signals": [
                        {
                            "sig_name": "left_current",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Amp",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_current",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Amp",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_voltage",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Voltx10"
                        }
                    ],
                    "msg_period": 100,
                    "msg_priority": 5
                },
                {
                    "msg_name": "sdc_status",
                    "msg_desc": "Shutdown Circuit Status",
                    "signals": [
                        {
                            "sig_name": "main",
                            "type": "bool"
                        },
                        {
                            "sig_name": "c_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "inertia",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BOTS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BSPD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BMS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "IMD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "r_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "l_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "HVD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "emeter",
                            "type": "bool"
                        },
                        {
                            "sig_name": "hub",
                            "type": "bool"
                        },
                        {
                            "sig_name": "TSMS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "pchg_out",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 300,
                    "msg_priority": 0
                },
                {
                    "msg_name": "rear_motor_temps",
                    "msg_desc": "Temperature of motor controllers and motors",
                    "signals": [
                        {
                            "sig_name": "left_mot_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_mot_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "left_inv_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_inv_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "left_igbt_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_igbt_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 5
                },
                {
                    "msg_name": "rear_wheel_speeds",
                    "msg_desc": "Rear Wheel speeds from motor controllers",
                    "signals": [
                        {
                            "sig_name": "left_speed_sensor",
                            "type": "uint16_t",
                            "unit": "rad/s",
                            "scale": 0.01
                        },
                        {
                            "sig_name": "right_speed_sensor",
                            "type": "uint16_t",
                            "unit": "rad/s",
                            "scale": 0.01
                        }
                    ],
                    "msg_period": 15,
                    "msg_priority": 5
                },
                {
                    "msg_name": "main_version",
                    "msg_desc": "Main version",
                    "signals": [
                        {
                            "sig_name": "git_hash",
                            "type": "uint32_t",
                            "sig_desc": "int representation of git short hash"
                        }
                    ],
                    "msg_priority": 5,
                    "msg_period": 5000
                }
            ],
            "rx": [
                {
                    "msg_name": "filt_throttle_brake"
                },
                {
                    "msg_name": "start_button",
                    "callback": false
                },
                {
                    "msg_name": "max_cell_temp"
                },
                {
                    "msg_name": "LWS_Standard"
                },
                {
                    "msg_name": "orion_currents_volts"
                },
                {
                    "msg_name": "orion_info"
                }
            ]
        },
        "MCAN": {
            "peripheral": "FDCAN3",
            "tx": [
                {
                    "msg_name": "main_hb_amk",
                    "msg_desc": "Heart beat message for main module",
                    "signals": [
                        {
                            "sig_name": "car_state",
                            "sig_desc": "Main car state",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "precharge_state",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 3
                },
                {
                    "msg_name": "INVA_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x188",
                    "msg_priority": 3
                },
                {
                    "msg_name": "INVB_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x189",
                    "msg_priority": 3
                }
            ],
            "rx": [
                {
                    "msg_name": "INVA_CRIT"
                },
                {
                    "msg_name": "INVA_INFO"
                },
                {
                    "msg_name": "INVA_TEMPS"
                },
                {
                    "msg_name": "INVA_SET"
                },
                {
                    "msg_name": "INVA_ERR_1"
                },
                {
                    "msg_name": "INVA_ERR_2"
                },
                {
                    "msg_name": "INVB_CRIT"
                },
                {
                    "msg_name": "INVB_INFO"
                },
                {
                    "msg_name": "INVB_TEMPS"
                },
                {
                    "msg_name": "INVB_SET"
                },
                {
                    "msg_name": "INVB_ERR_1"
                },
                {
                    "msg_name": "INVB_ERR_2"
                }
            ]
        }
    },
    "fault_library_enabled": true,
    "generate_fault_messages": false,
    "faults": [
        {
            "fault_name": "tv_stale",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 50,
            "time_to_unlatch": 1000,
            "lcd_message": "Torque From Pedals"
        },
        {
            "fault_name": "rtd_exit",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "HV not detected, idling"
        },
        {
            "fault_name": "left_mc_conn",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 3000,
            "time_to_unlatch": 1000,
            "lcd_message": "LEFT MC CONN FAIL"
        },
        {
            "fault_name": "right_mc_conn",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 3000,
            "time_to_unlatch": 1000,
            "lcd_message": "RIGHT MC CONN FAIL"
        },
        {
            "fault_name": "mcu_temp_high",
            "max": 50,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 2000,
            "lcd_message": "HIGH PDU MCU TEMP"
        },
        {
            "fault_name": "dt_l_temp_ot",
            "max": 90,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Left Gearbox Overheating"
        },
        {
            "fault_name": "dt_r_temp_ot",
            "max": 90,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Right Gearbox Overheating"
        },
        {
            "fault_name": "dt_l_temp_high",
            "max": 80,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Left Gearbox High (>80C)"
        },
        {
            "fault_name": "dt_r_temp_high",
            "max": 80,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Right Gearbox High (>80C)"
        },
        {
            "fault_name": "bat_cool_loop_high",
            "max": 50,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Batt Coolant Loop Temp High"
        },
        {
            "fault_name": "dt_cool_loop_high",
            "max": 90,
            "min": -100,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "DT Coolant Loop Temp High"
        },
        {
            "fault_name": "dt_r_therm_disc",
            "max": 200,
            "min": -30,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Right DT Therm Disconnect"
        },
        {
            "fault_name": "dt_l_therm_disc",
            "max": 200,
            "min": -30,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Left DT Therm Disconnect"
        },
        {
            "fault_name": "batt_cl_disc",
            "max": 200,
            "min": -30,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Batt CL Therm Disc"
        },
        {
            "fault_name": "dt_cl_disc",
            "max": 200,
            "min": -30,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "DT CL Therm Disc"
        },
        {
            "fault_name": "BSPD_latched",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 10000,
            "lcd_message": "BSPD Latched. Restart Car"
        },
        {
            "fault_name": "bots_fail",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "BOTS Activated"
        },
        {
            "fault_name": "inertia_fail",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "Inertia Switch activated"
        },
        {
            "fault_name": "cockpit_estop",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "Cockpit E-Stop Pressed"
        },
        {
            "fault_name": "right_estop",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "Right E-Stop Pressed"
        },
        {
            "fault_name": "left_estop",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "Left E-Stop Pressed"
        },
        {
            "fault_name": "hvd_disc",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "HVD Disconnected"
        },
        {
            "fault_name": "hub_disc",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "Hub Interlock Disconencted"
        },
        {
            "fault_name": "tsms_disc",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 1500,
            "time_to_unlatch": 1000,
            "lcd_message": "TSMS Off"
        },
        {
            "fault_name": "precharge_time_fault",
            "max": 9500,
            "min": -10,
            "priority": "fatal",
            "time_to_latch": 400,
            "time_to_unlatch": 10000,
            "lcd_message": "PRCHG time exceeded"
        },
        {
            "fault_name": "motor_r_heat",
            "max": 80,
            "min": -80,
            "priority": "error",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Right Motor Hot (>80C)"
        },
        {
            "fault_name": "motor_l_heat",
            "max": 80,
            "min": -80,
            "priority": "error",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Left Motor Hot (>80C)"
        },
        {
            "fault_name": "motor_r_ot",
            "max": 80,
            "min": -80,
            "priority": "error",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Right Motor Overtemp (>90C)"
        },
        {
            "fault_name": "motor_l_ot",
            "max": 80,
            "min": -80,
            "priority": "error",
            "time_to_latch": 1000,
            "time_to_unlatch": 1000,
            "lcd_message": "Left Motor Overtemp (>90C)"
        },
        {
            "fault_name": "left_mc_error",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 0,
            "time_to_unlatch": 1000,
            "lcd_message": "LEFT MC INTERNAL ERR"
        },
        {
            "fault_name": "right_mc_error",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 0,
            "time_to_unlatch": 1000,
            "lcd_message": "RIGHT MC INTERNAL ERR"
        }
    ]
}