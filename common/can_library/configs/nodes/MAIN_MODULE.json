{
    "node_name": "MAIN_MODULE",
    "scheduler": "freertos",
    "busses": {
        "VCAN": {
            "peripheral": "FDCAN2",
            "tx": [
                {
                    "msg_name": "main_hb",
                    "msg_desc": "Heart beat message for main module",
                    "signals": [
                        {
                            "sig_name": "car_state",
                            "sig_desc": "Main car state",
                            "type": "CarState_t"
                        },
                        {
                            "sig_name": "precharge_state",
                            "sig_desc": "Status of Precharge (complete vs not)",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 2
                },
                {
                    "msg_name": "main_module_can_stats",
                    "msg_desc": "CAN diagnostics",
                    "signals": [
                        {
                            "sig_name": "can1_tx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "VCAN Tx queue overflow count"
                        },
                        {
                            "sig_name": "can2_tx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "MCAN Tx queue overflow count"
                        },
                        {
                            "sig_name": "can1_tx_fail",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx fail count for VCAN (due to timeout in mailbox)"
                        },
                        {
                            "sig_name": "can2_tx_fail",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx fail count for MCAN (due to timeout in mailbox)"
                        },
                        {
                            "sig_name": "can_rx_queue_overflow",
                            "type": "uint8_t",
                            "sig_desc": "CAN Rx queue overflow count"
                        },
                        {
                            "sig_name": "can1_rx_overrun",
                            "type": "uint8_t",
                            "sig_desc": "VCAN Rx FIFO overrun count"
                        },
                        {
                            "sig_name": "can2_rx_overrun",
                            "type": "uint8_t",
                            "sig_desc": "MCAN Rx FIFO overrun count"
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 4
                },
                {
                    "msg_name": "rear_motor_currents_volts",
                    "msg_desc": "DC Current and Voltage of the motors",
                    "signals": [
                        {
                            "sig_name": "left_current",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Amp",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_current",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Amp",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_voltage",
                            "type": "uint16_t",
                            "length": 16,
                            "unit": "Voltx10"
                        }
                    ],
                    "msg_period": 100,
                    "msg_priority": 5
                },
                {
                    "msg_name": "sdc_status",
                    "msg_desc": "Shutdown Circuit Status",
                    "signals": [
                        {
                            "sig_name": "main",
                            "type": "bool"
                        },
                        {
                            "sig_name": "c_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "inertia",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BOTS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BSPD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "BMS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "IMD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "r_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "l_estop",
                            "type": "bool"
                        },
                        {
                            "sig_name": "HVD",
                            "type": "bool"
                        },
                        {
                            "sig_name": "emeter",
                            "type": "bool"
                        },
                        {
                            "sig_name": "hub",
                            "type": "bool"
                        },
                        {
                            "sig_name": "TSMS",
                            "type": "bool"
                        },
                        {
                            "sig_name": "pchg_out",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 300,
                    "msg_priority": 0
                },
                {
                    "msg_name": "rear_motor_temps",
                    "msg_desc": "Temperature of motor controllers and motors",
                    "signals": [
                        {
                            "sig_name": "left_mot_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_mot_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "left_inv_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_inv_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "left_igbt_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "right_igbt_temp",
                            "type": "uint8_t",
                            "length": 8,
                            "unit": "C",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 5
                },
                {
                    "msg_name": "rear_wheel_speeds",
                    "msg_desc": "Rear Wheel speeds from motor controllers",
                    "signals": [
                        {
                            "sig_name": "left_speed_sensor",
                            "type": "uint16_t",
                            "unit": "rad/s",
                            "scale": 0.01
                        },
                        {
                            "sig_name": "right_speed_sensor",
                            "type": "uint16_t",
                            "unit": "rad/s",
                            "scale": 0.01
                        }
                    ],
                    "msg_period": 15,
                    "msg_priority": 5
                },
                {
                    "msg_name": "main_version",
                    "msg_desc": "Main version",
                    "signals": [
                        {
                            "sig_name": "git_hash",
                            "type": "uint32_t",
                            "sig_desc": "int representation of git short hash"
                        }
                    ],
                    "msg_priority": 5,
                    "msg_period": 5000
                }
            ],
            "rx": [
                {
                    "msg_name": "filt_throttle_brake"
                },
                {
                    "msg_name": "start_button",
                    "callback": false
                }
            ]
        },
        "MCAN": {
            "peripheral": "FDCAN3",
            "tx": [
                {
                    "msg_name": "main_hb_amk",
                    "msg_desc": "Heart beat message for main module",
                    "signals": [
                        {
                            "sig_name": "car_state",
                            "sig_desc": "Main car state",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "precharge_state",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 3
                },
                {
                    "msg_name": "INVA_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x111",
                    "msg_priority": 1
                },
                {
                    "msg_name": "INVB_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x112",
                    "msg_priority": 1
                },
                {
                    "msg_name": "INVC_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x113",
                    "msg_priority": 1
                },
                {
                    "msg_name": "INVD_SET",
                    "msg_desc": "Contains control word and setpoints",
                    "signals": [
                        {
                            "sig_name": "AMK_Control_bReserve",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 8
                        },
                        {
                            "sig_name": "AMK_Control_bInverterOn",
                            "sig_desc": "Control word: controller enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bDcOn",
                            "sig_desc": "Control word: HV activation",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bEnable",
                            "sig_desc": "Control word: driver enable",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bErrorReset",
                            "sig_desc": "Control word: remove error",
                            "type": "bool"
                        },
                        {
                            "sig_name": "AMK_Control_bReserve2",
                            "sig_desc": "Control word: RESERVED",
                            "type": "uint8_t",
                            "length": 4
                        },
                        {
                            "sig_name": "AMK_TorqueSetpoint",
                            "sig_desc": "Torque setpoint",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_PositiveTorqueLimit",
                            "sig_desc": "Positive Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        },
                        {
                            "sig_name": "AMK_NegativeTorqueLimit",
                            "sig_desc": "Negative Torque Limit",
                            "type": "int16_t",
                            "unit": "Nm",
                            "scale": 0.1
                        }
                    ],
                    "msg_period": 15,
                    "msg_id_override": "0x114",
                    "msg_priority": 1
                }
            ],
            "rx": [
                {
                    "msg_name": "INVA_SET"
                },
                {
                    "msg_name": "INVA_CRIT"
                },
                {
                    "msg_name": "INVA_INFO"
                },
                {
                    "msg_name": "INVA_ERR_1"
                },
                {
                    "msg_name": "INVA_ERR_2"
                },
                {
                    "msg_name": "INVA_TEMPS"
                },
                {
                    "msg_name": "INVB_SET"
                },
                {
                    "msg_name": "INVB_CRIT"
                },
                {
                    "msg_name": "INVB_INFO"
                },
                {
                    "msg_name": "INVB_ERR_1"
                },
                {
                    "msg_name": "INVB_ERR_2"
                },
                {
                    "msg_name": "INVB_TEMPS"
                },
                {
                    "msg_name": "INVC_SET"
                },
                {
                    "msg_name": "INVC_CRIT"
                },
                {
                    "msg_name": "INVC_INFO"
                },
                {
                    "msg_name": "INVC_ERR_1"
                },
                {
                    "msg_name": "INVC_ERR_2"
                },
                {
                    "msg_name": "INVC_TEMPS"
                },
                {
                    "msg_name": "INVD_SET"
                },
                {
                    "msg_name": "INVD_CRIT"
                },
                {
                    "msg_name": "INVD_INFO"
                },
                {
                    "msg_name": "INVD_ERR_1"
                },
                {
                    "msg_name": "INVD_ERR_2"
                },
                {
                    "msg_name": "INVD_TEMPS"
                }
            ]
        }
    },
    "fault_library_enabled": true,
    "generate_fault_messages": false,
    "faults": [
        {
            "fault_name": "SDC1_IMD",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC1 (IMD) is open"
        },
        {
            "fault_name": "SDC2_BMS",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC2 (BMS) is open"
        },
        {
            "fault_name": "SDC3_BSPD",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC3 (BSPD) is open"
        },
        {
            "fault_name": "SDC4_MAIN_OK",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC4 (MAIN_OK) is open"
        },
        {
            "fault_name": "SDC5_BOTS",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC5 (BOTS) is open"
        },
        {
            "fault_name": "SDC6_INERTIA",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC6 (INERTIA) is open"
        },
        {
            "fault_name": "SDC7_COCKPIT_ESTOP",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC7 (COCKPIT_ESTOP) is open"
        },
        {
            "fault_name": "SDC9_FRONT_INTERLOCK",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC9 (FRONT_INTERLOCK) is open"
        },
        {
            "fault_name": "SDC10_RIGHT_ESTOP",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC10 (RIGHT_ESTOP) is open"
        },
        {
            "fault_name": "SDC11_LEFT_ESTOP",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC11 (LEFT_ESTOP) is open"
        },
        {
            "fault_name": "SDC12_MSD",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC12 (MSD) is open"
        },
        {
            "fault_name": "SDC13_E_METER",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC13 (E_METER) is open"
        },
        {
            "fault_name": "SDC15_REAR_INTERLOCK",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC15 (REAR_INTERLOCK) is open"
        },
        {
            "fault_name": "SDC16_TSMS",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC16 (TSMS) is open"
        },
        {
            "fault_name": "SDC17_AIR_M",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "SDC17 (AIR_M) is open"
        },
        {
            "fault_name": "PRECHARGE_INCOMPLETE",
            "max": 1,
            "min": 0,
            "priority": "error",
            "time_to_latch": 32,
            "time_to_unlatch": 100,
            "lcd_message": "Precharge is not complete"
        }

    ]
}