{
    "node_name": "PDU",
    "scheduler": "psched",
    "busses": {
        "VCAN": {
            "peripheral": "CAN1",
            "tx": [
                {
                    "msg_name": "v_rails",
                    "msg_desc": "PDU voltage rail readings",
                    "signals": [
                        {
                            "sig_name": "in_24v",
                            "sig_desc": "Unregulated 24V input",
                            "type": "uint16_t",
                            "unit": "mV"
                        },
                        {
                            "sig_name": "out_5v",
                            "sig_desc": "5v rail output voltage",
                            "type": "uint16_t",
                            "unit": "mV"
                        },
                        {
                            "sig_name": "out_3v3",
                            "sig_desc": "3v3 rail output voltage",
                            "type": "uint16_t",
                            "unit": "mV"
                        },
                        {
                            "sig_name": "amk_24v",
                            "type": "uint16_t",
                            "unit": "mV"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 4
                },
                {
                    "msg_name": "rail_currents",
                    "msg_desc": "PDU rail currents",
                    "signals": [
                        {
                            "sig_name": "i_24v",
                            "sig_desc": "Unregulated 24V rail current",
                            "type": "uint16_t",
                            "unit": "mA"
                        },
                        {
                            "sig_name": "i_5v",
                            "sig_desc": "5v rail current",
                            "type": "uint16_t",
                            "unit": "mA"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 4
                },
                {
                    "msg_name": "pump_and_fan_current",
                    "msg_desc": "PDU pump and fan currents",
                    "signals": [
                        {
                            "sig_name": "i_pump1",
                            "type": "uint16_t",
                            "unit": "mA"
                        },
                        {
                            "sig_name": "i_pump2",
                            "type": "uint16_t",
                            "unit": "mA"
                        },
                        {
                            "sig_name": "i_fan1",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_fan2",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_fan3",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_fan4",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 4
                },
                {
                    "msg_name": "other_currents",
                    "msg_desc": "Other PDU currents",
                    "signals": [
                        {
                            "sig_name": "i_sdc",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_aux",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_dash",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_abox",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        },
                        {
                            "sig_name": "i_main",
                            "type": "uint16_t",
                            "unit": "mA",
                            "length": 12
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 4
                },
                {
                    "msg_name": "coolant_out",
                    "msg_desc": "outputs to coolant loops",
                    "signals": [
                        {
                            "sig_name": "bat_fan",
                            "sig_desc": "Battery fan speed request",
                            "type": "uint8_t",
                            "unit": "%"
                        },
                        {
                            "sig_name": "dt_fan",
                            "sig_desc": "Drivetrain fan speed request",
                            "type": "uint8_t",
                            "unit": "%"
                        },
                        {
                            "sig_name": "bat_pump",
                            "sig_desc": "Battery pump enabled",
                            "type": "bool"
                        },
                        {
                            "sig_name": "bat_pump_aux",
                            "sig_desc": "Auxilliary output enable request",
                            "type": "bool"
                        },
                        {
                            "sig_name": "dt_pump",
                            "sig_desc": "Drivetrain pump enabled",
                            "type": "bool"
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 4
                },
                {
                    "msg_name": "flowrates",
                    "msg_desc": "Flowrate cooling loops",
                    "signals": [
                        {
                            "sig_name": "battery_flowrate",
                            "sig_desc": "Flow rate for battery coolant loop",
                            "type": "uint8_t",
                            "scale": 0.1,
                            "unit": "LPM"
                        },
                        {
                            "sig_name": "drivetrain_flowrate",
                            "sig_desc": "Flow rate for drivetrain coolant loop",
                            "type": "uint8_t",
                            "scale": 0.1,
                            "unit": "LPM"
                        }
                    ],
                    "msg_period": 200,
                    "msg_priority": 5
                },
                {
                    "msg_name": "pdu_temps",
                    "msg_desc": "PDU board temperatures",
                    "signals": [
                        {
                            "sig_name": "internal_therm",
                            "sig_desc": "Temperature from internal thermistor",
                            "type": "uint16_t",
                            "unit": "C"
                        }
                    ],
                    "msg_period": 500,
                    "msg_priority": 5
                },
                {
                    "msg_name": "pdu_can_stats",
                    "msg_desc": "CAN diagnostics",
                    "signals": [
                        {
                            "sig_name": "can_tx_overflow",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx queue overflow count"
                        },
                        {
                            "sig_name": "can_tx_fail",
                            "type": "uint8_t",
                            "sig_desc": "CAN Tx fail count (due to timeout in mailbox)"
                        },
                        {
                            "sig_name": "can_rx_overflow",
                            "type": "uint8_t",
                            "sig_desc": "CAN Rx queue overflow count"
                        },
                        {
                            "sig_name": "can_rx_overrun",
                            "type": "uint8_t",
                            "sig_desc": "CAN Rx FIFO overrun count"
                        }
                    ],
                    "msg_period": 1000,
                    "msg_priority": 4
                },
                {
                    "msg_name": "pdu_version",
                    "msg_desc": "PDU version",
                    "signals": [
                        {
                            "sig_name": "git_hash",
                            "type": "uint32_t",
                            "sig_desc": "int representation of git short hash"
                        }
                    ],
                    "msg_priority": 5,
                    "msg_period": 5000
                }
            ],
            "rx": [
                {
                    "msg_name": "pdu_bl_cmd",
                    "callback": true
                },
                {
                    "msg_name": "cooling_driver_request",
                    "callback": true
                },
                {
                    "msg_name": "main_hb"
                },
                {
                    "msg_name": "gps_speed"
                },
                {
                    "msg_name": "max_cell_temp"
                },
                {
                    "msg_name": "rear_motor_temps"
                }
            ]
        }
    },
    "fault_library_enabled": true,
    "generate_fault_messages": false,
    "faults": [
        {
            "fault_name": "pdu_mcu_temp_high",
            "max": 50,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 1000,
            "time_to_unlatch": 2000,
            "lcd_message": "HIGH PDU MCU TEMP"
        },
        {
            "fault_name": "dash_rail",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "Dash Rail Down"
        },
        {
            "fault_name": "abox_rail",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "ABox Rail Down"
        },
        {
            "fault_name": "main_rail",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "Main Rail Down"
        },
        {
            "fault_name": "daq_rail",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "DAQ Rail Down"
        },
        {
            "fault_name": "v_crit",
            "max": 1,
            "min": 0,
            "priority": "fatal",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "5v_crit down"
        },
        {
            "fault_name": "v_noncrit",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "5V_NC Rail Down"
        },
        {
            "fault_name": "fan1",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "Fan 1 Rail Down"
        },
        {
            "fault_name": "bullet_rail",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "Bullet Rail Down"
        },
        {
            "fault_name": "fan2",
            "max": 1,
            "min": 0,
            "priority": "warning",
            "time_to_latch": 100,
            "time_to_unlatch": 1000,
            "lcd_message": "Fan 2 Rail Down"
        },
        {
            "fault_name": "lv_critical_low",
            "max": 50000,
            "min": 20000,
            "priority": "warning",
            "time_to_latch": 500,
            "time_to_unlatch": 1500,
            "lcd_message": "LV bat Very Low (20V)"
        },
        {
            "fault_name": "lv_getting_low",
            "max": 50000,
            "min": 21000,
            "priority": "warning",
            "time_to_latch": 500,
            "time_to_unlatch": 1500,
            "lcd_message": "LV bat Low (21V)"
        },
        {
            "fault_name": "lv_batt_fifty",
            "max": 50000,
            "min": 25000,
            "priority": "warning",
            "time_to_latch": 500,
            "time_to_unlatch": 1500,
            "lcd_message": "LV bat Nominal (25V)"
        }
    ]
}
