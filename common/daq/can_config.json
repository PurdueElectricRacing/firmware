{
    "$schema":"./can_schema.json",
    "busses":[
        {
            "bus_name":"Main",
            "nodes":[
                {
                    "node_name":"Main_Module",
                    "node_ssa":0,
                    "tx":[
                        {   "msg_name":"driver_request",
                            "msg_desc":"Driver throttle/regeneration request",
                            "signals":[
                                {"sig_name":"accel", "sig_desc":"accel request. 0-4096","type":"uint16_t","length":16},
                                {"sig_name":"regen", "sig_desc":"regen request. 0-4096", "type":"uint16_t", "length":16}
                            ],
                            "msg_period":15,
                            "msg_hlp":1,
                            "msg_pgn":1
                        },
                        {   "msg_name":"main_status",
                            "msg_desc":"Status message for main module",
                            "signals":[
                                {"sig_name":"car_state", "sig_desc":"Main car state","type":"uint8_t","length":8, 
                                 "choices": ["init", "preready2drive", "ready2drive", "error", "reset", "recover"]},
                                {"sig_name":"apps_state", "sig_desc":"Accelerator plausibility state","type":"uint8_t","length":8},
                                {"sig_name":"precharge_state", "sig_desc":"Precharge complete state","type":"uint8_t","length":1}
                            ],
                            "msg_period":25,
                            "msg_hlp":1,
                            "msg_pgn":100
                        }
                    ],
                    "rx":[
                        {"msg_name": "raw_throttle_brake"},
                        {"msg_name": "start_button", "callback": false},
                        {"msg_name": "front_motor_currents_temps"},
                        {"msg_name": "rear_motor_currents_temps"}
                    ]
                },
                {
                    "node_name":"Torque_Vector",
                    "node_ssa":1,
                    "tx":[
                        {   "msg_name":"torque_request",
                            "msg_desc":"Torque request for all motors.",
                            "signals":[
                                {"sig_name":"front_left", "sig_desc":"torque request. 0-4096","type":"uint16_t","length":12},
                                {"sig_name":"front_right", "sig_desc":"torque request. 0-4096", "type":"uint16_t", "length":12},
                                {"sig_name":"rear_left", "sig_desc":"torque request. 0-4096", "type":"uint16_t", "length":12},
                                {"sig_name":"rear_right", "sig_desc":"torque request. 0-4096", "type":"uint16_t", "length":12}
                            ],
                            "msg_period":15,
                            "msg_hlp":1,
                            "msg_pgn":1
                        },
                        {   "msg_name":"bitstream_flash_status",
                            "msg_desc":"Status message for bitstream flashing",
                            "signals":[
                                {"sig_name":"flash_success", "sig_desc":"Done flashing bitstream","type":"uint8_t","length":1},
                                {"sig_name":"flash_timeout_rx", "sig_desc":"Timeout from CAN rx","type":"uint8_t","length":1}
                            ],
                            "msg_period":0,
                            "msg_hlp":0,
                            "msg_pgn":100
                        }
                    ],
                    "rx":[
                        {"msg_name": "front_wheel_data"},
                        {"msg_name": "rear_wheel_data"},
                        {"msg_name": "bitstream_data",    "callback": false, "irq": true},
                        {"msg_name": "bitstream_request", "callback": true, "irq": false}
                    ]
                },
                {
                    "node_name": "Driveline",
                    "node_ssa":2,
                    "tx": [
                        {   "msg_name": "front_wheel_data",
                            "msg_desc": "Wheel data for the rear tires",
                            "signals": [
                                {"sig_name": "left_speed", "type": "uint16_t", "length": 16},
                                {"sig_name": "right_speed", "type": "uint16_t", "length": 16},
                                {"sig_name": "left_normal", "type": "uint16_t", "length": 16},
                                {"sig_name": "right_normal", "type": "uint16_t", "length": 16}
                            ],
                            "msg_period": 10,
                            "msg_hlp": 1,
                            "msg_pgn": 0
                        },
                        {   "msg_name": "rear_wheel_data",
                            "msg_desc": "Wheel data for the rear tires",
                            "signals": [
                                {"sig_name": "left_speed", "type": "uint16_t", "length": 16},
                                {"sig_name": "right_speed", "type": "uint16_t", "length": 16},
                                {"sig_name": "left_normal", "type": "uint16_t", "length": 16},
                                {"sig_name": "right_normal", "type": "uint16_t", "length": 16}
                            ],
                            "msg_period": 10,
                            "msg_hlp": 1,
                            "msg_pgn": 1
                        },
                        {   "msg_name": "front_motor_currents_temps",
                            "msg_desc": "DC Current and Temperature of the motor controllers",
                            "signals": [
                                {"sig_name": "left_current", "type": "uint16_t", "length": 16},
                                {"sig_name": "right_current", "type": "uint16_t", "length": 16},
                                {"sig_name": "left_temp", "type":"uint8_t", "length":8, "unit": "C"},
                                {"sig_name": "right_temp", "type":"uint8_t", "length":8, "unit": "C"}
                            ],
                            "msg_period": 0,
                            "msg_hlp": 3,
                            "msg_pgn": 10
                        },
                        {   "msg_name": "rear_motor_currents_temps",
                            "msg_desc": "DC Current and Temperature of the motor controllers",
                            "signals": [
                                {"sig_name": "left", "type": "uint16_t", "length": 16},
                                {"sig_name": "right", "type": "uint16_t", "length": 16},
                                {"sig_name": "left_temp", "type":"uint8_t", "length":8, "unit": "C"},
                                {"sig_name": "right_temp", "type":"uint8_t", "length":8, "unit": "C"}
                            ],
                            "msg_period": 0,
                            "msg_hlp": 3,
                            "msg_pgn": 11
                        }
                    ],
                    "rx": [
                        {"msg_name":"torque_request"}
                    ]
                },
                {
                    "node_name": "Precharge",
                    "can_peripheral": "CAN1",
                    "node_ssa": 4,
                    "tx": [
                        {
                            "msg_name": "test_precharge_msg",
                            "msg_desc": "test precharge desc",
                            "signals": [
                                {"sig_name": "test_precharge_sig", "type":"uint8_t", "length": 8}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 2,
                            "msg_pgn": 512
                        }
                    ],
                    "rx": []
                },
                {
                    "node_name":"Dashboard",
                    "node_ssa":5,
                    "tx":[
                        {   "msg_name":"raw_throttle_brake",
                            "msg_desc":"throttle_brake desc",
                            "signals":[
                                {"sig_name":"throttle","type":"uint16_t","length":12},
                                {"sig_name":"brake", "type":"uint16_t", "length":12}
                            ],
                            "msg_period":5,
                            "msg_hlp":5,
                            "msg_pgn":10
                        },
                        {   "msg_name":"start_button",
                            "msg_desc":"Car start button pressed",
                            "signals":[
                                {"sig_name":"start","type":"uint8_t","length":1}
                            ],
                            "msg_period":0,
                            "msg_hlp":1,
                            "msg_pgn":0
                        }
                    ],
                    "rx":[
                        {"msg_name": "main_status"},
                        {"msg_name": "front_wheel_data"}
                    ]
                },
                {
                    "node_name":"TESTER",
                    "node_ssa":62,
                    "tx":[
                        {   "msg_name":"bitstream_data",
                            "msg_desc":"Bitstream download command",
                            "signals":[
                                {"sig_name":"d0", "sig_desc":"Bitstream data word 0","type":"uint8_t","length":8},
                                {"sig_name":"d1", "sig_desc":"Bitstream data word 1","type":"uint8_t","length":8},
                                {"sig_name":"d2", "sig_desc":"Bitstream data word 2","type":"uint8_t","length":8},
                                {"sig_name":"d3", "sig_desc":"Bitstream data word 3","type":"uint8_t","length":8},
                                {"sig_name":"d4", "sig_desc":"Bitstream data word 4","type":"uint8_t","length":8},
                                {"sig_name":"d5", "sig_desc":"Bitstream data word 5","type":"uint8_t","length":8},
                                {"sig_name":"d6", "sig_desc":"Bitstream data word 6","type":"uint8_t","length":8},
                                {"sig_name":"d7", "sig_desc":"Bitstream data word 7","type":"uint8_t","length":8}
                            ],
                            "msg_period":0,
                            "msg_hlp":4,
                            "msg_pgn":100
                        },
                        {   "msg_name":"bitstream_request",
                            "msg_desc":"Bitstream state command",
                            "signals":[
                                {"sig_name":"download_request", "sig_desc":"Request to download new bitstream","type":"uint8_t","length":1},
                                {"sig_name":"download_size", "sig_desc":"size for expected bitstream download (bytes)","type":"uint32_t","length":32}
                            ],
                            "msg_period":0,
                            "msg_hlp":4,
                            "msg_pgn":101
                        }
                    ],
                    "rx":[ 
                        {"msg_name": "bitstream_flash_status"}
                    ]
                }
            ]
        },
        {
            "bus_name": "Battery",
            "nodes": [
                {
                    "node_name": "Precharge",
                    "can_peripheral": "CAN2",
                    "node_ssa": 42,
                    "tx": [
                        {
                            "msg_name": "balance_request",
                            "msg_desc": "Request BMSs to discharge their cells to the desired voltage",
                            "signals": [
                                {"sig_name": "volts", "type": "uint16_t", "length": 16}
                            ],
                            "msg_period": 0,
                            "msg_hlp": 1,
                            "msg_pgn": 500
                        }
                    ],
                    "rx": [
                        {"msg_name": "soc1"}
                    ]
                },
                {
                    "node_name": "BMS1",
                    "can_peripheral": "CAN1",
                    "node_ssa": 43,
                    "tx": [
                        {
                            "msg_name": "soc1",
                            "msg_desc": "Estimated soc",
                            "signals": [
                                {"sig_name": "soc", "type": "uint16_t", "length": 16}
                            ],
                            "msg_period": 0,
                            "msg_hlp": 1,
                            "msg_pgn": 500
                        }
                    ],
                    "rx": [
                        {"msg_name": "test_msg"}
                    ]
                }
            ]
        },
        {
            "bus_name": "Test",
            "nodes": [
                {
                    "node_name": "TEST_NODE",
                    "node_ssa":63,
                    "tx":[
                        {   "msg_name":"test_msg",
                            "msg_desc":"test_msg desc",
                            "signals":[
                                {"sig_name": "test_sig", "type":"int16_t"}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 1
                        },
                        {   "msg_name":"test_msg2",
                            "msg_desc":"test_msg2 desc",
                            "signals":[
                                {"sig_name": "test_sig2", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 2 
                        },
                        {   "msg_name":"test_msg3",
                            "msg_desc":"test_msg2 desc",
                            "signals":[
                                {"sig_name": "test_sig3", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 3
                        },
                        {   "msg_name":"test_msg4",
                            "msg_desc":"test_msg4 desc",
                            "signals":[
                                {"sig_name": "test_sig4", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 4 
                        },
                        {   "msg_name":"test_msg5",
                            "msg_desc":"test_msg5 desc",
                            "signals":[
                                {"sig_name": "test_sig5", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 5 
                        },
                        {
                            "msg_name":"wheel_speeds",
                            "msg_desc": "wheel speeds",
                            "signals":[
                                {"sig_name": "left_speed", "type":"float", "unit":"kph"},
                                {"sig_name": "right_speed", "type":"float", "unit":"kph"}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 3,
                            "msg_pgn": 7 
                        },
                        {
                            "msg_name":"adc_values",
                            "msg_desc": "adc potentiometer readings",
                            "signals":[
                                {"sig_name": "pot1", "type":"uint16_t", "length": 12},
                                {"sig_name": "pot2", "type":"uint16_t", "length": 12},
                                {"sig_name": "pot3", "type":"uint16_t", "length": 12}
                            ],
                            "msg_period": 15,
                            "msg_id_override": "0x00001234"
                        },
                        {
                            "msg_name":"car_state",
                            "msg_desc": "state of the car",
                            "signals":[
                                {"sig_name":"car_state", "type":"uint8_t", "length": 8, "choices":["ready2go","flipped","flying","lightspeed"]}
                            ],
                            "msg_period":0,
                            "msg_id_override": "0xBEEF420"
                        }
                    ],
                    "rx":[
                        {"msg_name": "test_msg5_2"},
                        {"msg_name": "test_stale"},
                        {"msg_name": "car_state2"}
                    ]
                },
                {
                    "node_name": "TEST_NODE_2",
                    "node_ssa":61,
                    "tx":[
                        {   "msg_name":"test_msg_2",
                            "msg_desc":"test_msg desc",
                            "signals":[
                                {"sig_name": "test_sig", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 1
                        },
                        {   "msg_name":"test_msg2_2",
                            "msg_desc":"test_msg2 desc",
                            "signals":[
                                {"sig_name": "test_sig2", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 2 
                        },
                        {   "msg_name":"test_msg3_2",
                            "msg_desc":"test_msg2 desc",
                            "signals":[
                                {"sig_name": "test_sig3", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 3
                        },
                        {   "msg_name":"test_msg4_2",
                            "msg_desc":"test_msg4 desc",
                            "signals":[
                                {"sig_name": "test_sig4", "type":"uint16_t", "length": 16}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 4 
                        },
                        {   "msg_name":"test_msg5_2",
                            "msg_desc":"test_msg5 desc",
                            "signals":[
                                {"sig_name": "test_sig5", "type":"uint16_t", "length": 16},
                                {"sig_name": "test_sig5_2", "type": "int16_t"},
                                {"sig_name": "test_sig5_3", "type": "float"}
                            ],
                            "msg_period": 15,
                            "msg_hlp": 5,
                            "msg_pgn": 5 
                        },
                        {
                            "msg_name":"test_stale",
                            "msg_desc":"used to test stale",
                            "signals":[
                                {"sig_name":"data", "type":"uint8_t", "length": 8}
                            ],
                            "msg_period":1000,
                            "msg_id_override": "0x2222"
                        },
                        {
                            "msg_name":"car_state2",
                            "msg_desc": "state of the car",
                            "signals":[
                                {"sig_name":"car_state2", "type":"uint8_t", "length": 8, "choices":["ready2go","flipped","flying","lightspeed"]}
                            ],
                            "msg_period":0,
                            "msg_id_override": "0xBEEF421"
                        }
                    ],
                    "rx":[
                    ]
                }
            ]
        }
    ]
}