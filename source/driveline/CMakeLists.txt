cmake_minimum_required(VERSION 3.13)

# Setup Component name based on directory
get_filename_component(COMPONENT_NAME ${CMAKE_CURRENT_LIST_DIR} NAME)
STRING(TOLOWER ${COMPONENT_NAME} COMPONENT_NAME)

# Create a component for the front and rear variants of the driveline code
MAKE_COMMON_COMPONENT(${COMPONENT_NAME} ${CMAKE_CURRENT_LIST_DIR} "CMSIS_L432;PSCHED;QUEUE;PHAL_L432;m" )
target_compile_definitions(${COMPONENT_NAME}.elf PUBLIC FTR_DRIVELINE_REAR=1 FTR_DRIVELINE_FRONT=0)

MAKE_COMMON_COMPONENT(${COMPONENT_NAME}_rear ${CMAKE_CURRENT_LIST_DIR} "CMSIS_L432;PSCHED;QUEUE;PHAL_L432;m")
target_compile_definitions(${COMPONENT_NAME}_rear.elf  PUBLIC FTR_DRIVELINE_REAR=0 FTR_DRIVELINE_FRONT=1)
